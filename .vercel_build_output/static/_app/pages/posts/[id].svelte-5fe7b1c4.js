var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{Y as i,Z as l,_ as c,$ as d,a0 as p,a1 as u,a2 as f,S as h,i as w,s as g,e as b,t as y,k as m,a3 as O,c as v,a as j,g as P,d as x,n as k,a4 as F,b as S,f as $,F as C,G as D}from"../../chunks/vendor-3586de2d.js";const N=new l({auth:"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"}),_={owner:"sotoplatero",repo:"data",path:"cubablogs/db.json"},A={blogs:[],async all(){let{data:e}=await N.repos.getContent(_);return JSON.parse(c(e.content))},async add(e){let a=await this.all(),t=a.findIndex((a=>d(a.url)===d(e.url)));return t>0?(e.updated_at=new Date,a.splice(t,1,e)):(e.created_at=new Date,e.id=p(),a.splice(a.length,0,e),function(e){const a=new i("1930807081:AAF7WK26X3NWzkshWPmni5Ck10z9Ti3scjw",{polling:!1});try{a.sendMessage(-0xe92f2db8da,e)}catch(t){console.log("Something went wrong when trying to send a Telegram notification",t)}}(`Nuevo Blog: ${e.title} ${e.url}`)),this.save(a),a},async find(e){return(await this.all()).find((a=>a.url===e))},async save(e){const{data:i}=await N.repos.getContent(_);var l,c;return await N.repos.createOrUpdateFileContents((l=((e,a)=>{for(var t in a||(a={}))n.call(a,t)&&o(e,t,a[t]);if(s)for(var t of s(a))r.call(a,t)&&o(e,t,a[t]);return e})({},_),c={message:"+",sha:i.sha,content:u(JSON.stringify(e))},a(l,t(c)))),e}};function E(e){let a,t,s,n,r,o=e[0].title+"",i=e[0]["content:encoded"]+"";return{c(){a=b("div"),t=b("h2"),s=y(o),n=m(),r=new O,this.h()},l(e){a=v(e,"DIV",{class:!0});var i=j(a);t=v(i,"H2",{});var l=j(t);s=P(l,o),l.forEach(x),n=k(i),r=F(i),i.forEach(x),this.h()},h(){r.a=null,S(a,"class","prose !prose-xl mx-auto")},m(e,o){$(e,a,o),C(a,t),C(t,s),C(a,n),r.m(i,a)},p:D,i:D,o:D,d(e){e&&x(a)}}}async function I({page:e,fetch:a}){const{id:t}=e.params,s=(await A.all()).find((e=>e.id===t));let n=new f;return{props:{feed:await n.parseURL(s.rss)}}}function J(e,a,t){let{feed:s}=a,n=s.items[0];return e.$$set=e=>{"feed"in e&&t(1,s=e.feed)},[n,s]}class W extends h{constructor(e){super(),w(this,e,J,E,g,{feed:1})}}export{W as default,I as load};
